/*
 * main.c
 *
 *  Created on: Oct 31, 2023
 *      Author: BILAL
 */

#include "../MCAL/gpio.h"
#include "../MCAL/adc.h"
#include "../HAL/lcd.h"
#include "../HAL/lm35_sensor.h"
#include "../HAL/DC_Motor.h"
#include "../MCAL/PWM0.h"


void main(void)
{
	uint8 read_temp ;

	//initialize the ADC driver.
	ADC_ConfigType adc_config = {Internal_2_56V,F_CPU_8};
	ADC_init(&adc_config);

	//Initialize the LCD driver.
	LCD_init();

	//Initialize the DC Motor driver.
	DcMotor_Init();

	LCD_displayString("Fan is ");
	LCD_displayStringRowColumn(1, 0, "Temp = ");

	while(1)
	{
		read_temp = LM35_getTemperature();

		if(read_temp >= 30)
		{
			LCD_displayStringRowColumn(0, 7, "ON");
			LCD_moveCursor(1, 7);
			LCD_intgerToString(read_temp);
			LCD_moveCursor(1, 10);
			LCD_displayCharacter('C');
		}
		else
		{
			LCD_displayStringRowColumn(0, 7, "OFF");
			LCD_moveCursor(1, 7);
			LCD_intgerToString(read_temp);
			LCD_moveCursor(1, 10);
			LCD_displayCharacter('C');
		}
	}
}
